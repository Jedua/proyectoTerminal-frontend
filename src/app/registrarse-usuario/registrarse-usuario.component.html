<div class="form-container">
  <h1>Registrar Usuario</h1>
  <form (ngSubmit)="onSubmit()" #registerForm="ngForm" class="register-form">

    <!-- Nombre -->
    <div class="form-group">
      <label for="nombre">Nombre:</label>
      <input type="text" id="nombre" [(ngModel)]="user.nombre" name="nombre" required minlength="2" class="form-control">
      <div *ngIf="registerForm.submitted && !user.nombre" class="error-message">El nombre es obligatorio.</div>
    </div>

    <!-- Apellidos -->
    <div class="form-group">
      <label for="apellidos">Apellidos:</label>
      <input type="text" id="apellidos" [(ngModel)]="user.apellidos" name="apellidos" required minlength="2" class="form-control">
      <div *ngIf="registerForm.submitted && !user.apellidos" class="error-message">Los apellidos son obligatorios.</div>
    </div>

    <!-- Correo -->
    <div class="form-group">
      <label for="correo">Correo:</label>
      <input type="email" id="correo" [(ngModel)]="user.correo" name="correo" required email class="form-control">
      <div *ngIf="registerForm.submitted && !user.correo" class="error-message">El correo es obligatorio.</div>
      <div *ngIf="registerForm.submitted && user.correo && registerForm.controls['correo']?.errors?.['email']" class="error-message">El formato del correo es incorrecto.</div>
    </div>

    <!-- Dirección -->
    <div class="form-group">
      <label for="direccion">Dirección:</label>
      <input type="text" id="direccion" [(ngModel)]="user.direccion" name="direccion" class="form-control">
    </div>

    <!-- Teléfono -->
    <div class="form-group">
      <label for="telefono">Teléfono:</label>
      <input type="tel" id="telefono" [(ngModel)]="user.telefono" name="telefono" pattern="^[0-9]{10}$" class="form-control">
      <div *ngIf="registerForm.submitted && !user.telefono" class="error-message">El teléfono es obligatorio.</div>
      <div *ngIf="registerForm.submitted && user.telefono && registerForm.controls['telefono']?.errors?.['pattern']" class="error-message">El teléfono debe tener 10 dígitos.</div>
    </div>

    <!-- Fecha de nacimiento -->
    <div class="form-group">
      <label for="fecha_nacimiento">Fecha de nacimiento:</label>
      <input type="date" id="fecha_nacimiento" [(ngModel)]="user.fecha_nacimiento" name="fecha_nacimiento" required class="form-control">
      <div *ngIf="registerForm.submitted && !user.fecha_nacimiento" class="error-message">La fecha de nacimiento es obligatoria.</div>
    </div>

    <!-- Sexo -->
    <div class="form-group">
      <label for="sexo">Sexo:</label>
      <select id="sexo" [(ngModel)]="user.sexo" name="sexo" required class="form-control">
        <option value="">Seleccione</option>
        <option value="Hombre">Hombre</option>
        <option value="Mujer">Mujer</option>
        <option value="Otro">Otro</option>
      </select>
      <div *ngIf="registerForm.submitted && !user.sexo" class="error-message">El sexo es obligatorio.</div>
    </div>

    <!-- Usuario -->
    <div class="form-group">
      <label for="usuario">Usuario:</label>
      <input type="text" id="usuario" [(ngModel)]="user.usuario" name="usuario" required minlength="3" class="form-control">
      <div *ngIf="registerForm.submitted && !user.usuario" class="error-message">El nombre de usuario es obligatorio.</div>
    </div>

    <!-- Contraseña -->
    <div class="form-group">
      <label for="contrasena">Contraseña:</label>
      <input type="password" id="contrasena" [(ngModel)]="user.pass" name="pass" required minlength="6" class="form-control" (input)="checkPasswordsMatch()">
      <div *ngIf="registerForm.submitted && !user.pass" class="error-message">La contraseña es obligatoria.</div>
    </div>

    <!-- Validar Contraseña -->
    <div class="form-group">
      <label for="validar_contrasena">Validar contraseña:</label>
      <input type="password" id="validar_contrasena" [(ngModel)]="user.validar_contrasena" name="validar_contrasena" required class="form-control" (input)="checkPasswordsMatch()">
      <div *ngIf="registerForm.submitted && !user.validar_contrasena" class="error-message">Debes validar la contraseña.</div>
      <div *ngIf="!passwordsMatch && user.validar_contrasena" class="error-message">{{ errorMessage }}</div>
    </div>

    <!-- Botón de registro -->
    <button type="submit" class="btn btn-primary" [disabled]="!registerForm.valid || !passwordsMatch">Registrar</button>
  </form>
</div>
